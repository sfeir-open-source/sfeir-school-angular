<form #personForm="ngForm" (ngSubmit)="onSave()" data-testid="person-form">
  <section class="form-container">
    <section class="form-container__image">
      <img [ngSrc]="person.photo" width="100" height="100" alt="person-photo" />
      <input type="hidden" name="photo" [(ngModel)]="person.photo" />
    </section>
    <section>
      <mat-form-field appearance="outline">
        <mat-label>First name</mat-label>
        <input type="text" matInput placeholder="First name" name="firstname" #firstname="ngModel"
               [(ngModel)]="person.firstname" required minlength=" 2" />
        @if (firstname.errors?.['required']) {
          <mat-error>Ce champs est requis</mat-error>
        }
        @if (firstname.errors?.['minlength']) {
          <mat-error>Ce champs doit posséder minimum 2 caractères</mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Last name</mat-label>
        <input type="text" matInput placeholder="Last name" name="lastname" #lastname="ngModel"
               [(ngModel)]="person.lastname" required minlength="2" />
        @if (lastname.errors?.['required']) {
          <mat-error>Ce champs est requis</mat-error>
        }
        @if (lastname.errors?.['minlength']) {
          <mat-error>Ce champs doit posséder minimum 2 caractères</mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input type="email" matInput placeholder="email" name="email" #email="ngModel" [(ngModel)]="person.email"
               required />
        @if (email.errors?.['required']) {
          <mat-error>Ce champs est requis</mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>phone</mat-label>
        <input type="phone" matInput placeholder="phone" name="phone" #phone="ngModel" [(ngModel)]="person.phone"
               required pattern="\d{10}" />
        @if (phone.errors?.['required']) {
          <mat-error>Ce champs est requis</mat-error>
        }
        @if (phone.errors?.['pattern']) {
          <mat-error>Ce champs doit respecter le pattern suivant (10 caractères)</mat-error>
        }
      </mat-form-field>
    </section>
  </section>
  <div class="form-user-action">
    <button mat-button type="button" (click)="onCancel()">Cancel</button>
    <button mat-button color="primary" type="submit" [disabled]="personForm.invalid">Save</button>
  </div>
</form>
